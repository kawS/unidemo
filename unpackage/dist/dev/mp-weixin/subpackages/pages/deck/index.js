"use strict";const e=require("../../../common/vendor.js"),w=require("../../../common/assets.js"),L=require("./js/fixData.js");Math||$();const $=()=>"../../../components/emptyList/index.js",U={__name:"index",setup(C){const O={MEW:"SV3_5",OBF:"SV3",PAL:"SV2",SVI:"SV1",CRZ:"SS12_5",SIT:"SS12",LOR:"SS11",PGO:"SS10_5",ASR:"SS10",BRS:"SS9",FST:"SS8",CEL:"SS7_5",EVS:"SS7",CRE:"SS6",BST:"SS5"},N=["SV3_5","SV3","SV2","SV1","SS12_5","SS12","SS11","SS10_5","SS10","SS9","SS8","SS7_5","SS7","SS6","SS5"],d=["Grass Energy","Fire Energy","Water Energy","Lightning Energy","Psychic Energy","Fighting Energy","Darkness Energy","Metal Energy"];let S=[],y=0,v=[],_=e.ref([]),p=e.ref(!1),o=e.ref(null),E=e.ref(null),b=e.ref(null),x=e.ref(null);e.onLoad(c=>{const s=e.index.getStorageSync("tempDeck");let n=JSON.parse(s),r=[];b.value=n;for(let t of n){let i=t.substring(0,t.indexOf(" ")+1);/\{G\}/.test(t)&&(t=i+d[0]+" 1"),/\{R\}/.test(t)&&(t=i+d[1]+" 2"),/\{W\}/.test(t)&&(t=i+d[2]+" 3"),/\{L\}/.test(t)&&(t=i+d[3]+" 4"),/\{P\}/.test(t)&&(t=i+d[4]+" 5"),/\{F\}/.test(t)&&(t=i+d[5]+" 6"),/\{D\}/.test(t)&&(t=i+d[6]+" 7"),/\{M\}/.test(t)&&(t=i+d[7]+" 8"),r.push(t)}x.value=r.length,k(r)});const k=c=>{e.index.showLoading({title:"加载中",mask:!0});let s={};for(let n of c){let r=n.replace(/(^\d{1,2} )|( \d{1,3}$)/g,"");if(!d.includes(r)){let h=r.lastIndexOf(" ");v.push(r.substring(0,h))}let t=null,i=null,l=null,a=null,f=null,m=null,g=n.match(/(\d{1,2}) (.+) ([A-Z]{2}\-[A-Z]{2}|[A-Z]{3}\-[A-Z]{2}|[A-Z]{3}) (\d{1,3})/);if(g==null){if(!/ Energy/.test(n))continue;g=n.match(/(\d{1,2}) (.+) (\d{1,3})/),i=g[1],l=g[2];let h=D(l,i);S.push(h);continue}else i=g[1],l=g[2],O[g[3]]?(a=g[3],m=g[4]):L.fixData[l]?(a=L.fixData[l].series,m=L.fixData[l].cardNo):(a=g[3],m=g[4]),f=null;if(/-/.test(a)){let h=a.split("-");m=`${h[1]} ${m}`,a=h[0]}f=O[a],f&&(s[f]||(s[f]=[]),t={count:i,ename:l,series:a,sNo:f,cardNo:m},s[f].push(t))}y=Object.keys(s).length,e._.isEmpty(s)?u([],[]):P(s),setTimeout(()=>{e.index.hideLoading()},1500)},P=c=>{var n;let s=c;for(let r of N)if(((n=s[r])==null?void 0:n.length)>0)switch(r){case"SV3_5":Promise.resolve(require("../seriesDet/json/SV3_5.js")).then(t=>{u(t.default,s[r])});break;case"SV3":Promise.resolve(require("../seriesDet/json/SV3.js")).then(t=>{u(t.default,s[r])});break;case"SV2":Promise.resolve(require("../seriesDet/json/SV2.js")).then(t=>{u(t.default,s[r])});break;case"SV1":Promise.resolve(require("../seriesDet/json/SV1.js")).then(t=>{u(t.default,s[r])});break;case"SS12_5":Promise.resolve(require("../seriesDet/json/SS12_5.js")).then(t=>{u(t.default,s[r])});break;case"SS12":Promise.resolve(require("../seriesDet/json/SS12.js")).then(t=>{u(t.default,s[r])});break;case"SS11":Promise.resolve(require("../seriesDet/json/SS11.js")).then(t=>{u(t.default,s[r])});break;case"SS10_5":Promise.resolve(require("../seriesDet/json/SS10_5.js")).then(t=>{u(t.default,s[r])});break;case"SS10":Promise.resolve(require("../seriesDet/json/SS10.js")).then(t=>{u(t.default,s[r])});break;case"SS9":Promise.resolve(require("../seriesDet/json/SS9.js")).then(t=>{u(t.default,s[r])});break;case"SS8":Promise.resolve(require("../seriesDet/json/SS8.js")).then(t=>{u(t.default,s[r])});break;case"SS7_5":Promise.resolve(require("../seriesDet/json/SS7_5.js")).then(t=>{u(t.default,s[r])});break;case"SS7":Promise.resolve(require("../seriesDet/json/SS7.js")).then(t=>{u(t.default,s[r])});break;case"SS6":Promise.resolve(require("../seriesDet/json/SS6.js")).then(t=>{u(t.default,s[r])});break;case"SS5":Promise.resolve(require("../seriesDet/json/SS5.js")).then(t=>{u(t.default,s[r])});break}},u=(c,s,n)=>{let r=[];for(let t of c){let i=[],l=null;t.ename=t.ename.replace(/ \(.+\)/,""),l=t.ename,`${t.cardNo}`.indexOf("|")>0&&(i=t.cardNo.split("|"));for(let a of s)if(i.length>0){if(i.includes(a.cardNo)&&a.ename.replace("’","'")==l){let f=i.findIndex(g=>g==a.cardNo),m=JSON.parse(JSON.stringify(t));m.count=a.count,m.artIndex=f==0?-1:f-1,r.push(m)}}else if(a.cardNo==t.cardNo&&a.ename.replace("’","'")==l){let f=JSON.parse(JSON.stringify(t));f.count=a.count,f.artIndex=-1,r.push(f)}}if(S=[...S,...r],y-=1,y<=0){let t=S.map(a=>a.ename),i=e._.difference(v,t);E.value=i.length>0?i:"";let l={p:[],t:[],e:[]};for(let a of S)a.type=="Pokemon"&&l.p.push(a),a.type=="Trainers"&&l.t.push(a),a.type=="Energy"&&l.e.push(a);l.p=e._.sortBy(l.p,a=>a.typeEnergy),l.t=e._.sortBy(l.t,a=>a.skillList[a.skillList.length-1].name),S=[...l.p,...l.t,...l.e],_.value=S}else{let t=S.map(l=>l.ename),i=e._.difference(v,t);E.value=i.length>0?i.join(", "):""}},D=(c,s)=>{let r={"Grass Energy":{name:"草",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_091_R_EN.png"},"Fire Energy":{name:"火",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_092_R_EN.png"},"Water Energy":{name:"水",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_093_R_EN.png"},"Lightning Energy":{name:"雷",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_094_R_EN.png"},"Psychic Energy":{name:"超",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_095_R_EN.png"},"Fighting Energy":{name:"斗",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_096_R_EN.png"},"Darkness Energy":{name:"恶",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_097_R_EN.png"},"Metal Energy":{name:"钢",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_098_R_EN.png"}}[c];return{imgUrl:r.img,cardName:r.name+"能量",type:"Energy",enImgUrl:r.img,ename:c,count:s}},I=c=>{c.skillRule=c.skillList.filter(s=>/太晶/g.test(s.name)||/规则/g.test(s.name)),o.value=c,o.value.showImg=o.value.imgUrl,p.value=!0},V=c=>{o.value.showImg=c},q=()=>{e.index.setClipboardData({data:b.value.join("\r"),success:function(){console.log("success")}})},R=c=>{e.index.navigateTo({url:`/subpackages/pages/search/index?searchinp=${encodeURIComponent(c)}`,success:s=>{},fail:()=>{},complete:()=>{}})};return(c,s)=>e.e({a:`overflow: ${e.unref(p)==!0?"hidden":""}`,b:e.t(e.unref(_).length),c:e.unref(E)!=""},e.unref(E)!=""?{d:e.f(e.unref(E),(n,r,t)=>({a:e.t(n),b:e.o(i=>R(n))}))}:{},{e:e.unref(_).length>0},e.unref(_).length>0?{f:e.f(e.unref(_),(n,r,t)=>e.e({a:n.artIndex==-1||!n.artList},n.artIndex==-1||!n.artList?{b:n.enImgUrl}:{c:n==null?void 0:n.artList[n.artIndex]},{d:e.t(n.count),e:e.t(n.series),f:n.name,g:e.o(i=>I(n),n.name)})),g:w._imports_0}:{},{h:e.t(e.unref(x)),i:e.f(e.unref(b),(n,r,t)=>({a:e.t(n),b:r})),j:e.o(q),k:e.unref(p)},e.unref(p)?e.e({l:e.unref(o).showImg,m:e.unref(o).enImgUrl},e.unref(o).enImgUrl?e.e({n:e.unref(o).imgUrl,o:e.o(n=>V(e.unref(o).imgUrl)),p:e.unref(o).isHide!=!0},e.unref(o).isHide!=!0?{q:e.unref(o).enImgUrl,r:e.o(n=>V(e.unref(o).enImgUrl))}:{},{s:e.f(e.unref(o).artList,(n,r,t)=>({a:n,b:e.o(i=>V(n),r),c:r}))}):{},{t:e.unref(o).artList?"":1,v:e.t(e.unref(o).cardName),w:e.t(e.unref(o).ename),x:!/^(基本).*?(能量)$/.test(e.unref(o).cardName)},/^(基本).*?(能量)$/.test(e.unref(o).cardName)?{}:{y:e.f(e.unref(o).skillList,(n,r,t)=>e.e({a:!/太晶/g.test(n.name)&&!/规则/g.test(n.name)},!/太晶/g.test(n.name)&&!/规则/g.test(n.name)?{b:e.t(n.name),c:/太晶/g.test(n.name)?1:"",d:/特性/g.test(n.name)?1:"",e:/规则/g.test(n.name)?1:"",f:/VSTAR力量/g.test(n.name)?1:"",g:e.t(n.effect==""?"-":n.effect)}:{},{h:n.name}))},{z:e.f(e.unref(o).skillRule,(n,r,t)=>({a:e.t(n.name),b:/太晶/g.test(n.name)?1:"",c:/规则/g.test(n.name)?1:"",d:e.t(n.effect==""?"-":n.effect),e:n.name})),A:e.o(n=>e.isRef(p)?p.value=!1:p=!1),B:e.unref(p)?1:""}):{})}},A=e._export_sfc(U,[["__scopeId","data-v-51075066"],["__file","/Users/kaws-mac/Desktop/unidemo/subpackages/pages/deck/index.vue"]]);wx.createPage(A);
