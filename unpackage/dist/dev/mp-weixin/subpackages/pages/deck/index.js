"use strict";const e=require("../../../common/vendor.js"),A=require("../../../common/assets.js"),v=require("../../untils/seriesList.js"),g=require("../../untils/baseEList.js"),y=require("./js/fixData.js");Math||(j+R)();const j=()=>"../../../components/emptyList/index.js",R=()=>"../../../components/copyright/index.js",q={__name:"index",setup(P){let p=[],x=0,w=[],L=e.ref([]),m=e.ref(!1),f=e.ref(null),_=e.ref(null),h=e.ref(null),D=e.ref(null),C=e.ref(null);e.onLoad(l=>{const o=e.index.getStorageSync("tempDeck");let t=JSON.parse(o),r=[];D.value=t;for(let n of t){let s=n.substring(0,n.indexOf(" ")+1);/\{G\}/.test(n)&&(n=s+g.baseEList[0]+" 1"),/\{R\}/.test(n)&&(n=s+g.baseEList[1]+" 2"),/\{W\}/.test(n)&&(n=s+g.baseEList[2]+" 3"),/\{L\}/.test(n)&&(n=s+g.baseEList[3]+" 4"),/\{P\}/.test(n)&&(n=s+g.baseEList[4]+" 5"),/\{F\}/.test(n)&&(n=s+g.baseEList[5]+" 6"),/\{D\}/.test(n)&&(n=s+g.baseEList[6]+" 7"),/\{M\}/.test(n)&&(n=s+g.baseEList[7]+" 8"),r.push(n)}C.value=r.length,N(r)});const N=l=>{e.index.showLoading({title:"加载中",mask:!0}),setTimeout(()=>{e.index.hideLoading()},1500);let o={};h.value=[];for(let t of l){let r=t.replace(/(^\d{1,2} )|( \d{1,3}$)/g,"");g.baseEList.includes(r)||r.lastIndexOf(" ");let n=null,s=null,i=null,a=null,u=null,c=null,d=t.match(/(\d{1,2}) (.+) ([A-Z]{2}\-[A-Z]{2}|[A-Z]{3}\-[A-Z]{2}|[A-Z]{3}|[A-Z]{5}) (\d{1,3})/);if(d==null){if(!/ Energy/.test(t))continue;d=t.match(/(\d{1,2}) (.+) (\d{1,3})/),s=d[1],i=d[2];let b=g.returnEnergyData(i,s);p.push(b);continue}else s=d[1],i=d[2],v.seriesCodeList[d[3]]?(a=d[3],c=d[4]):y.fixCard[i]?(a=y.fixCard[i].series,c=y.fixCard[i].cardNo):(a=d[3],c=d[4]),u=null;if(/-/.test(a)){let b=a.split("-");b[0]!="PR"?(c=`${b[1]} ${c}`,a=b[0]):(c=`${c}`,a=a)}u=v.seriesCodeList[a],u?(o[u]||(o[u]=[]),n={count:s,ename:i,series:a,sNo:u,cardNo:c},o[u].push(n)):h.value.push({count:s,ename:i,series:a,sNo:u,cardNo:c})}x=Object.keys(o).length,e._.isEmpty(o)?E([],[]):k(o)},k=l=>{var t;let o=l;for(let r of v.seriesList)((t=o[r])==null?void 0:t.length)>0&&v.returnSerDetList(r,function(n){E(n.default,o[r])})},E=(l,o,t)=>{let r=[];for(let s of l){let i=null;s.ename=s.ename.replace(/ \(.+\)/,""),i=s.ename;for(let a of o)if(a.cardNo==s.cardNo&&a.ename.replace("’","'").toLowerCase()==i.toLowerCase()){let u=JSON.parse(JSON.stringify(s));u.count=a.count,u.artIndex=-1,r.push(u)}}if(p=[...p,...r],x-=1,x<=0){let s=p.map(u=>u.ename.toLowerCase()),i=e._.difference(w,s);_.value=i.length>0?i:"";let a={p:[],t:[],e:[]};var n=[[],[],[],[],[],[],[],[],[],[],[]];for(let u of p){if(u.type=="Pokemon"){let c=y.typeIndex[`${u.typeEnergy}`].index;n[c].push(u)}u.type=="Trainers"&&a.t.push(u),u.type=="Energy"&&a.e.unshift(u)}a.p=n.flat(),a.t=e._.sortBy(a.t,u=>u.skillList[u.skillList.length-1].name),p=[...a.p,...a.t,...a.e],L.value=p}else{let s=p.map(a=>a.ename.toLowerCase()),i=e._.difference(w,s);_.value=i.length>0?i.join(", "):""}},S=l=>{l.type=="Energy"&&!l.skillList||(l.skillRule=l.skillList.filter(o=>/太晶/g.test(o.name)||/规则/g.test(o.name)),f.value=l,f.value.showImg=f.value.enImgUrl,m.value=!0)},I=l=>{f.value.showImg=l},U=()=>{e.index.setClipboardData({data:D.value.join("\r"),success:function(){console.log("success")}})},$=l=>{e.index.navigateTo({url:`/subpackages/pages/search/index?searchinp=${encodeURIComponent(l)}`})};return(l,o)=>e.e({a:`overflow: ${e.unref(m)==!0?"hidden":""}`,b:e.t(e.unref(L).length),c:e.unref(_)!=""},e.unref(_)!=""?{d:e.f(e.unref(_),(t,r,n)=>({a:e.t(t),b:r,c:e.o(s=>$(t),r)}))}:{},{e:e.unref(h)!=null&&e.unref(h).length>0},e.unref(h)!=null&&e.unref(h).length>0?{f:e.f(e.unref(h),(t,r,n)=>({a:e.t(t.ename),b:e.t(t.series),c:r,d:e.o(s=>$(t.ename),r)}))}:{},{g:e.unref(L).length>0},e.unref(L).length>0?{h:e.f(e.unref(L),(t,r,n)=>e.e({a:t.artIndex==-1||!t.artList},t.artIndex==-1||!t.artList?{b:t.enImgUrl}:{c:t==null?void 0:t.artList[t.artIndex]},{d:e.t(t.count),e:e.t(t.series),f:t.name,g:e.o(s=>S(t),t.name)})),i:A._imports_0}:{},{j:e.t(e.unref(C)),k:e.f(e.unref(D),(t,r,n)=>({a:e.t(t),b:r})),l:e.o(U),m:e.unref(m)},e.unref(m)?e.e({n:e.unref(f).showImg,o:e.unref(f).enImgUrl&&!e.unref(f).isHide},e.unref(f).enImgUrl&&!e.unref(f).isHide?e.e({p:e.unref(f).imgUrl,q:e.o(t=>I(e.unref(f).imgUrl)),r:e.unref(f).isHide!=!0},e.unref(f).isHide!=!0?{s:e.unref(f).enImgUrl,t:e.o(t=>I(e.unref(f).enImgUrl))}:{},{v:e.f(e.unref(f).artList,(t,r,n)=>({a:t,b:e.o(s=>I(t),r),c:r}))}):{},{w:e.unref(f).artList?"":1,x:e.t(e.unref(f).cardName),y:e.t(e.unref(f).ename),z:!/^(基本).*?(能量)$/.test(e.unref(f).cardName)},/^(基本).*?(能量)$/.test(e.unref(f).cardName)?{}:{A:e.f(e.unref(f).skillList,(t,r,n)=>e.e({a:!/太晶/g.test(t.name)&&!/规则/g.test(t.name)},!/太晶/g.test(t.name)&&!/规则/g.test(t.name)?{b:e.t(t.name),c:/太晶/g.test(t.name)?1:"",d:/特性/g.test(t.name)?1:"",e:/规则/g.test(t.name)?1:"",f:/VSTAR力量/g.test(t.name)?1:"",g:e.t(t.effect==""?"-":t.effect)}:{},{h:t.name}))},{B:e.f(e.unref(f).skillRule,(t,r,n)=>({a:e.t(t.name),b:/太晶/g.test(t.name)?1:"",c:/规则/g.test(t.name)?1:"",d:e.t(t.effect==""?"-":t.effect),e:t.name})),C:e.o(t=>e.isRef(m)?m.value=!1:m=!1),D:e.unref(m)?1:""}):{})}},O=e._export_sfc(q,[["__scopeId","data-v-51075066"],["__file","/Users/kaws-mac/Desktop/unidemo/subpackages/pages/deck/index.vue"]]);wx.createPage(O);
