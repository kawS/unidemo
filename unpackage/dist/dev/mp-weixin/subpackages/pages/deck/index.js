"use strict";const e=require("../../../common/vendor.js"),R=require("../../../common/assets.js"),V=require("../../../pages/index/js/seriesList.js"),S=require("../../../pages/index/js/baseEList.js"),L=require("./js/fixData.js");Math||(A+N)();const A=()=>"../../../components/emptyList/index.js",N=()=>"../../../components/copyright/index.js",j={__name:"index",setup(O){const x={PAR:"SV4",MEW:"SV3_5",OBF:"SV3",PAL:"SV2",SVI:"SV1",CRZ:"SS12_5",SIT:"SS12",LOR:"SS11",PGO:"SS10_5",ASR:"SS10",BRS:"SS9",FST:"SS8",CEL:"SS7_5",EVS:"SS7",CRE:"SS6",BST:"SS5"};let g=[],y=0,q=[],_=e.ref([]),h=e.ref(!1),l=e.ref(null),b=e.ref(null),p=e.ref(null),P=e.ref(null),E=e.ref(null);e.onLoad(f=>{const n=e.index.getStorageSync("tempDeck");let r=JSON.parse(n),s=[];P.value=r;for(let t of r){let a=t.substring(0,t.indexOf(" ")+1);/\{G\}/.test(t)&&(t=a+S.baseEList[0]+" 1"),/\{R\}/.test(t)&&(t=a+S.baseEList[1]+" 2"),/\{W\}/.test(t)&&(t=a+S.baseEList[2]+" 3"),/\{L\}/.test(t)&&(t=a+S.baseEList[3]+" 4"),/\{P\}/.test(t)&&(t=a+S.baseEList[4]+" 5"),/\{F\}/.test(t)&&(t=a+S.baseEList[5]+" 6"),/\{D\}/.test(t)&&(t=a+S.baseEList[6]+" 7"),/\{M\}/.test(t)&&(t=a+S.baseEList[7]+" 8"),s.push(t)}E.value=s.length,w(s)});const w=f=>{e.index.showLoading({title:"加载中",mask:!0});let n={};p.value=[];for(let r of f){let s=r.replace(/(^\d{1,2} )|( \d{1,3}$)/g,"");S.baseEList.includes(s)||s.lastIndexOf(" ");let t=null,a=null,c=null,u=null,i=null,d=null,m=r.match(/(\d{1,2}) (.+) ([A-Z]{2}\-[A-Z]{2}|[A-Z]{3}\-[A-Z]{2}|[A-Z]{3}) (\d{1,3})/);if(m==null){if(!/ Energy/.test(r))continue;m=r.match(/(\d{1,2}) (.+) (\d{1,3})/),a=m[1],c=m[2];let v=S.returnEnergyData(c,a);g.push(v);continue}else a=m[1],c=m[2],x[m[3]]?(u=m[3],d=m[4]):L.fixCard[c]?(u=L.fixCard[c].series,d=L.fixCard[c].cardNo):(u=m[3],d=m[4]),i=null;if(/-/.test(u)){let v=u.split("-");v[0]!="PR"?(d=`${v[1]} ${d}`,u=v[0]):(d=`${d}`,u=u)}i=x[u],i?(n[i]||(n[i]=[]),t={count:a,ename:c,series:u,sNo:i,cardNo:d},n[i].push(t)):p.value.push({count:a,ename:c,series:u,sNo:i,cardNo:d})}y=Object.keys(n).length,e._.isEmpty(n)?o([],[]):C(n),setTimeout(()=>{e.index.hideLoading()},1500)},C=f=>{var r;let n=f;for(let s of V.seriesList)if(((r=n[s])==null?void 0:r.length)>0)switch(s){case"SV4":Promise.resolve(require("../seriesDet/json/SV4.js")).then(t=>{o(t.default,n[s])});break;case"SV3_5":Promise.resolve(require("../seriesDet/json/SV3_5.js")).then(t=>{o(t.default,n[s])});break;case"SV3":Promise.resolve(require("../seriesDet/json/SV3.js")).then(t=>{o(t.default,n[s])});break;case"SV2":Promise.resolve(require("../seriesDet/json/SV2.js")).then(t=>{o(t.default,n[s])});break;case"SV1":Promise.resolve(require("../seriesDet/json/SV1.js")).then(t=>{o(t.default,n[s])});break;case"SS12_5":Promise.resolve(require("../seriesDet/json/SS12_5.js")).then(t=>{o(t.default,n[s])});break;case"SS12":Promise.resolve(require("../seriesDet/json/SS12.js")).then(t=>{o(t.default,n[s])});break;case"SS11":Promise.resolve(require("../seriesDet/json/SS11.js")).then(t=>{o(t.default,n[s])});break;case"SS10_5":Promise.resolve(require("../seriesDet/json/SS10_5.js")).then(t=>{o(t.default,n[s])});break;case"SS10":Promise.resolve(require("../seriesDet/json/SS10.js")).then(t=>{o(t.default,n[s])});break;case"SS9":Promise.resolve(require("../seriesDet/json/SS9.js")).then(t=>{o(t.default,n[s])});break;case"SS8":Promise.resolve(require("../seriesDet/json/SS8.js")).then(t=>{o(t.default,n[s])});break;case"SS7_5":Promise.resolve(require("../seriesDet/json/SS7_5.js")).then(t=>{o(t.default,n[s])});break;case"SS7":Promise.resolve(require("../seriesDet/json/SS7.js")).then(t=>{o(t.default,n[s])});break;case"SS6":Promise.resolve(require("../seriesDet/json/SS6.js")).then(t=>{o(t.default,n[s])});break;case"SS5":Promise.resolve(require("../seriesDet/json/SS5.js")).then(t=>{o(t.default,n[s])});break}},o=(f,n,r)=>{let s=[];for(let a of f){let c=null;a.ename=a.ename.replace(/ \(.+\)/,""),c=a.ename;for(let u of n)if(u.cardNo==a.cardNo&&u.ename.replace("’","'").toLowerCase()==c.toLowerCase()){let i=JSON.parse(JSON.stringify(a));i.count=u.count,i.artIndex=-1,s.push(i)}}if(g=[...g,...s],y-=1,y<=0){let a=g.map(i=>i.ename.toLowerCase()),c=e._.difference(q,a);b.value=c.length>0?c:"";let u={p:[],t:[],e:[]};var t=[[],[],[],[],[],[],[],[],[],[],[]];for(let i of g){if(i.type=="Pokemon"){let d=L.typeIndex[`${i.typeEnergy}`].index;t[d].push(i)}i.type=="Trainers"&&u.t.push(i),i.type=="Energy"&&u.e.push(i)}u.p=t.flat(),u.t=e._.sortBy(u.t,i=>i.skillList[i.skillList.length-1].name),g=[...u.p,...u.t,...u.e],_.value=g}else{let a=g.map(u=>u.ename.toLowerCase()),c=e._.difference(q,a);b.value=c.length>0?c.join(", "):""}},D=f=>{f.type=="Energy"&&!f.skillList||(f.skillRule=f.skillList.filter(n=>/太晶/g.test(n.name)||/规则/g.test(n.name)),l.value=f,l.value.showImg=l.value.imgUrl,h.value=!0)},k=f=>{l.value.showImg=f},I=()=>{e.index.setClipboardData({data:P.value.join("\r"),success:function(){console.log("success")}})},$=f=>{e.index.navigateTo({url:`/subpackages/pages/search/index?searchinp=${encodeURIComponent(f)}`,success:n=>{},fail:()=>{},complete:()=>{}})};return(f,n)=>e.e({a:`overflow: ${e.unref(h)==!0?"hidden":""}`,b:e.t(e.unref(_).length),c:e.unref(b)!=""},e.unref(b)!=""?{d:e.f(e.unref(b),(r,s,t)=>({a:e.t(r),b:s,c:e.o(a=>$(r),s)}))}:{},{e:e.unref(p)!=null&&e.unref(p).length>0},e.unref(p)!=null&&e.unref(p).length>0?{f:e.f(e.unref(p),(r,s,t)=>({a:e.t(r.ename),b:e.t(r.series),c:s}))}:{},{g:e.unref(_).length>0},e.unref(_).length>0?{h:e.f(e.unref(_),(r,s,t)=>({a:r.imgUrl,b:e.t(r.count),c:e.t(r.series),d:r.name,e:e.o(a=>D(r),r.name)})),i:R._imports_0}:{},{j:e.t(e.unref(E)),k:e.f(e.unref(P),(r,s,t)=>({a:e.t(r),b:s})),l:e.o(I),m:e.unref(h)},e.unref(h)?e.e({n:e.unref(l).showImg,o:e.unref(l).enImgUrl&&!e.unref(l).isHide},e.unref(l).enImgUrl&&!e.unref(l).isHide?e.e({p:e.unref(l).imgUrl,q:e.o(r=>k(e.unref(l).imgUrl)),r:e.unref(l).isHide!=!0},e.unref(l).isHide!=!0?{s:e.unref(l).enImgUrl,t:e.o(r=>k(e.unref(l).enImgUrl))}:{},{v:e.f(e.unref(l).artList,(r,s,t)=>({a:r,b:e.o(a=>k(r),s),c:s}))}):{},{w:e.unref(l).artList?"":1,x:e.t(e.unref(l).cardName),y:e.t(e.unref(l).ename),z:!/^(基本).*?(能量)$/.test(e.unref(l).cardName)},/^(基本).*?(能量)$/.test(e.unref(l).cardName)?{}:{A:e.f(e.unref(l).skillList,(r,s,t)=>e.e({a:!/太晶/g.test(r.name)&&!/规则/g.test(r.name)},!/太晶/g.test(r.name)&&!/规则/g.test(r.name)?{b:e.t(r.name),c:/太晶/g.test(r.name)?1:"",d:/特性/g.test(r.name)?1:"",e:/规则/g.test(r.name)?1:"",f:/VSTAR力量/g.test(r.name)?1:"",g:e.t(r.effect==""?"-":r.effect)}:{},{h:r.name}))},{B:e.f(e.unref(l).skillRule,(r,s,t)=>({a:e.t(r.name),b:/太晶/g.test(r.name)?1:"",c:/规则/g.test(r.name)?1:"",d:e.t(r.effect==""?"-":r.effect),e:r.name})),C:e.o(r=>e.isRef(h)?h.value=!1:h=!1),D:e.unref(h)?1:""}):{})}},U=e._export_sfc(j,[["__scopeId","data-v-51075066"],["__file","/Users/kaws-mac/Desktop/unidemo/subpackages/pages/deck/index.vue"]]);wx.createPage(U);
