"use strict";const t=require("../../../common/vendor.js"),q=require("../../../common/assets.js");Math||R();const R=()=>"../../../components/emptyList/index.js",w={__name:"index",setup(A){const L={MEW:"SV3_5",OBF:"SV3",PAL:"SV2",SVI:"SV1",CRZ:"SS12_5",SIT:"SS12",LOR:"SS11",PGO:"SS10_5",ASR:"SS10",BRS:"SS9",FST:"SS8",CEL:"SS7_5",EVS:"SS7",CRE:"SS6",BST:"SS5"},x=["SV3_5","SV3","SV2","SV1","SS12_5","SS12","SS11","SS10_5","SS10","SS9","SS8","SS7_5","SS7","SS6","SS5"],m=["Grass Energy","Fire Energy","Water Energy","Lightning Energy","Psychic Energy","Fighting Energy","Darkness Energy","Metal Energy"];let d=[],y=0,b=[],_=t.ref([]),S=t.ref(!1),l=t.ref(null),E=t.ref(null),v=t.ref(null),V=t.ref(null);t.onLoad(u=>{const s=t.index.getStorageSync("tempDeck");let n=JSON.parse(s),r=[];for(let e of n)if(!/^Pokémon/.test(e)){{if(/^Trainer/.test(e))continue;if(/^Energy/.test(e))continue;if(/^Total Cards/.test(e))continue;if(e=="")continue}e=e.replace(" PH",""),/\{G\}/.test(e)&&(e=e.substring(0,e.indexOf(" ")+1)+m[0]+" 1"),/\{R\}/.test(e)&&(e=e.substring(0,e.indexOf(" ")+1)+m[1]+" 2"),/\{W\}/.test(e)&&(e=e.substring(0,e.indexOf(" ")+1)+m[2]+" 3"),/\{L\}/.test(e)&&(e=e.substring(0,e.indexOf(" ")+1)+m[3]+" 4"),/\{P\}/.test(e)&&(e=e.substring(0,e.indexOf(" ")+1)+m[4]+" 5"),/\{F\}/.test(e)&&(e=e.substring(0,e.indexOf(" ")+1)+m[5]+" 6"),/\{D\}/.test(e)&&(e=e.substring(0,e.indexOf(" ")+1)+m[6]+" 7"),/\{M\}/.test(e)&&(e=e.substring(0,e.indexOf(" ")+1)+m[7]+" 8"),r.push(e)}P(r),v.value=r,V.value=r.length});const P=u=>{t.index.showLoading({title:"加载中",mask:!0});let s={};for(let n of u){let r=n.replace(/(^\d{1,2} )|( \d{1,3}$)/g,"");if(!m.includes(r)){let h=r.lastIndexOf(" ");b.push(r.substring(0,h).replace("’","'"))}let e=null,o=null,i=null,a=null,f=null,p=null,g=n.replace(" PH","").match(/(\d{1,2}) (.+) ([A-Z]{3}\-[A-Z]{2}|[A-Z]{3}|[A-Z]{2}\-[A-Z]{2}) (\d{1,3})/);if(n=="1 Boss's Orders SWSHALT 102"&&console.log(g),g==null){if(!/ Energy/.test(n))continue;g=n.match(/(\d{1,2}) (.+) (\d{1,3})/),o=g[1],i=g[2];let h=k(i,o);d.push(h);continue}else o=g[1],i=g[2],a=g[3],p=g[4],f=null;if(/-/.test(a)){let h=a.split("-");p=`${h[1]} ${p}`,a=h[0]}f=L[a],f&&(s[f]||(s[f]=[],y+=1),e={count:o,ename:i,series:a,sNo:f,cardNo:p},s[f].push(e))}t._.isEmpty(s)?c([],[]):N(s),setTimeout(()=>{t.index.hideLoading()},1500)},N=u=>{var n;let s=u;for(let r of x)if(((n=s[r])==null?void 0:n.length)>0)switch(r){case"SV3_5":Promise.resolve(require("../seriesDet/json/SV3_5.js")).then(e=>{c(e.default,s[r])});break;case"SV3":Promise.resolve(require("../seriesDet/json/SV3.js")).then(e=>{c(e.default,s[r])});break;case"SV2":Promise.resolve(require("../seriesDet/json/SV2.js")).then(e=>{c(e.default,s[r])});break;case"SV1":Promise.resolve(require("../seriesDet/json/SV1.js")).then(e=>{c(e.default,s[r])});break;case"SS12_5":Promise.resolve(require("../seriesDet/json/SS12_5.js")).then(e=>{c(e.default,s[r])});break;case"SS12":Promise.resolve(require("../seriesDet/json/SS12.js")).then(e=>{c(e.default,s[r])});break;case"SS11":Promise.resolve(require("../seriesDet/json/SS11.js")).then(e=>{c(e.default,s[r])});break;case"SS10_5":Promise.resolve(require("../seriesDet/json/SS10_5.js")).then(e=>{c(e.default,s[r])});break;case"SS10":Promise.resolve(require("../seriesDet/json/SS10.js")).then(e=>{c(e.default,s[r])});break;case"SS9":Promise.resolve(require("../seriesDet/json/SS9.js")).then(e=>{c(e.default,s[r])});break;case"SS8":Promise.resolve(require("../seriesDet/json/SS8.js")).then(e=>{c(e.default,s[r])});break;case"SS7_5":Promise.resolve(require("../seriesDet/json/SS7_5.js")).then(e=>{c(e.default,s[r])});break;case"SS7":Promise.resolve(require("../seriesDet/json/SS7.js")).then(e=>{c(e.default,s[r])});break;case"SS6":Promise.resolve(require("../seriesDet/json/SS6.js")).then(e=>{c(e.default,s[r])});break;case"SS5":Promise.resolve(require("../seriesDet/json/SS5.js")).then(e=>{c(e.default,s[r])});break}},c=(u,s,n)=>{let r=[];for(let e of u){let o=[],i=e.ename.replace(/ \(.+\)/,"");`${e.cardNo}`.indexOf("|")>0&&(o=e.cardNo.split("|"));for(let a of s)if(o.length>0){if(o.includes(a.cardNo)&&a.ename.replace("’","'")==i){let f=o.findIndex(g=>g==a.cardNo),p=JSON.parse(JSON.stringify(e));p.count=a.count,p.artIndex=f==0?-1:f-1,r.push(p)}}else if(a.cardNo==e.cardNo&&a.ename.replace("’","'")==i){let f=JSON.parse(JSON.stringify(e));f.count=a.count,f.artIndex=-1,r.push(f)}}if(d=[...d,...r],y-=1,y<=0){let e=d.map(a=>a.ename.replace(/ \(.+\)/,"")),o=t._.difference(b,e);E.value=o.length>0?o.join(", "):"";let i={p:[],t:[],e:[]};for(let a of d)a.type=="Pokemon"&&i.p.push(a),a.type=="Trainers"&&i.t.push(a),a.type=="Energy"&&i.e.push(a);i.p=t._.sortBy(i.p,a=>a.typeEnergy),i.t=t._.sortBy(i.t,a=>a.skillList[a.skillList.length-1].name),d=[...i.p,...i.t,...i.e],_.value=d}else{let e=d.map(i=>i.ename.replace(/ \(.+\)/,"")),o=t._.difference(b,e);E.value=o.length>0?o.join(", "):""}},k=(u,s)=>{let r={"Grass Energy":{name:"草",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_091_R_EN.png"},"Fire Energy":{name:"火",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_092_R_EN.png"},"Water Energy":{name:"水",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_093_R_EN.png"},"Lightning Energy":{name:"雷",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_094_R_EN.png"},"Psychic Energy":{name:"超",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_095_R_EN.png"},"Fighting Energy":{name:"斗",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_096_R_EN.png"},"Darkness Energy":{name:"恶",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_097_R_EN.png"},"Metal Energy":{name:"钢",img:"https://limitlesstcg.nyc3.digitaloceanspaces.com/tpci/EVO/EVO_098_R_EN.png"}}[u];return{imgUrl:r.img,cardName:r.name+"能量",type:"Energy",enImgUrl:r.img,ename:u,count:s}},I=u=>{u.skillRule=u.skillList.filter(s=>/太晶/g.test(s.name)||/规则/g.test(s.name)),l.value=u,l.value.showImg=l.value.imgUrl,S.value=!0},O=u=>{l.value.showImg=u},D=()=>{t.index.setClipboardData({data:v.value.join("\r"),success:function(){console.log("success")}})};return(u,s)=>t.e({a:`overflow: ${t.unref(S)==!0?"hidden":""}`,b:t.t(t.unref(_).length),c:t.unref(E)!=""},t.unref(E)!=""?{d:t.t(t.unref(E))}:{},{e:t.unref(_).length>0},t.unref(_).length>0?{f:t.f(t.unref(_),(n,r,e)=>t.e({a:n.artIndex==-1||!n.artList},n.artIndex==-1||!n.artList?{b:n.enImgUrl}:{c:n==null?void 0:n.artList[n.artIndex]},{d:t.t(n.count),e:t.t(n.series),f:n.name,g:t.o(o=>I(n),n.name)})),g:q._imports_0}:{},{h:t.t(t.unref(V)),i:t.f(t.unref(v),(n,r,e)=>({a:t.t(n),b:r})),j:t.o(D),k:t.unref(S)},t.unref(S)?t.e({l:t.unref(l).showImg,m:t.unref(l).enImgUrl},t.unref(l).enImgUrl?{n:t.unref(l).imgUrl,o:t.o(n=>O(t.unref(l).imgUrl)),p:t.unref(l).enImgUrl,q:t.o(n=>O(t.unref(l).enImgUrl)),r:t.f(t.unref(l).artList,(n,r,e)=>({a:n,b:t.o(o=>O(n),r),c:r}))}:{},{s:t.unref(l).artList?"":1,t:t.t(t.unref(l).cardName),v:t.t(t.unref(l).ename),w:!/^(基本).*?(能量)$/.test(t.unref(l).cardName)},/^(基本).*?(能量)$/.test(t.unref(l).cardName)?{}:{x:t.f(t.unref(l).skillList,(n,r,e)=>t.e({a:!/太晶/g.test(n.name)&&!/规则/g.test(n.name)},!/太晶/g.test(n.name)&&!/规则/g.test(n.name)?{b:t.t(n.name),c:/太晶/g.test(n.name)?1:"",d:/特性/g.test(n.name)?1:"",e:/规则/g.test(n.name)?1:"",f:/VSTAR力量/g.test(n.name)?1:"",g:t.t(n.effect==""?"-":n.effect)}:{},{h:n.name}))},{y:t.f(t.unref(l).skillRule,(n,r,e)=>({a:t.t(n.name),b:/太晶/g.test(n.name)?1:"",c:/规则/g.test(n.name)?1:"",d:t.t(n.effect==""?"-":n.effect),e:n.name})),z:t.o(n=>t.isRef(S)?S.value=!1:S=!1),A:t.unref(S)?1:""}):{})}},$=t._export_sfc(w,[["__scopeId","data-v-51075066"],["__file","/Users/kaws-mac/Desktop/unidemo/subpackages/pages/deck/index.vue"]]);wx.createPage($);
