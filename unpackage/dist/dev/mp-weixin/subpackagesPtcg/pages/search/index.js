"use strict";const e=require("../../../common/vendor.js"),C=require("../../../common/assets.js"),v=require("../../untils/seriesList.js");Math||(S+I)();const S=()=>"../../../components/emptyList/index.js",I=()=>"../../../components/copyright/index.js",U={__name:"index",setup(A){let i=[],l=0,d=e.ref(null),g=e.ref([]),m=e.ref(""),c=e.ref(!1),n=e.ref(null);e.onLoad(s=>{d.value=decodeURIComponent(s.searchinp),p()});const p=async()=>{l=0,i=[],g.value=[],m.value="",e.index.showLoading({title:"加载中",mask:!0}),await L(),setTimeout(function(){e.index.hideLoading()},1500)},L=async()=>{const s=await Promise.resolve(require("./json/SV-series.js")),u=await Promise.resolve(require("./json/SS-series.js"));let t=s.default,r=u.default,f=[];for(let o of t)`${o.name} ${o.ename.toLowerCase()}`.search(d.value.toLowerCase())!=-1&&f.push({name:o.name,series:o.series});for(let o of r)`${o.name} ${o.ename.toLowerCase()}`.search(d.value.toLowerCase())!=-1&&f.push({name:o.name,series:o.series});f.length==0?g.value=[]:_(f)},_=s=>{var t;let u={};for(let r of s)u[r.series]||(u[r.series]=[]),u[r.series].push(r.name);for(let r of v.seriesList)((t=u[r])==null?void 0:t.length)>0&&v.returnSerDetList(r,function(f){w(f.default,u[r])})},w=(s,u,t)=>{let r=s.filter(f=>u.includes(f.cardName));l+=r.length,i=[...i,...r],l==i.length&&(g.value=i)},$=()=>{if(m.value==""){e.index.showToast({title:"请输入卡名",icon:"none",duration:2e3});return}e.index.pageScrollTo&&e.index.pageScrollTo({scrollTop:0}),d.value=m.value,p()},x=s=>{s.skillRule=s.skillList.filter(u=>/太晶/g.test(u.name)||/规则/g.test(u.name)||/ACE /g.test(u.name)),n.value=s,n.value.showImg=n.value.imgUrl,c.value=!0},h=s=>{n.value.showImg=s};return(s,u)=>e.e({a:`overflow: ${e.unref(c)==!0?"hidden":""}`,b:e.t(e.unref(g).length),c:e.unref(m),d:e.o(t=>e.isRef(m)?m.value=t.detail.value:m=t.detail.value),e:e.o($),f:e.unref(g).length>0},e.unref(g).length>0?{g:e.f(e.unref(g),(t,r,f)=>{var o;return e.e({a:!/^(基本).*?(能量)$/.test(t.cardName)},/^(基本).*?(能量)$/.test(t.cardName)?{}:{b:e.f(t.skillList,(a,N,D)=>e.e({a:!/太晶/g.test(a.name)&&!/规则/g.test(a.name)&&!/ACE /g.test(a.name)},!/太晶/g.test(a.name)&&!/规则/g.test(a.name)&&!/ACE /g.test(a.name)?{b:e.t(a.name),c:/太晶/g.test(a.name)?1:"",d:/特性/g.test(a.name)?1:"",e:/规则/g.test(a.name)?1:"",f:/VSTAR力量/g.test(a.name)?1:"",g:e.t(a.effect==""?"-":a.effect)}:{},{h:a.name}))},{c:t.imgUrl,d:e.t(t.series),e:e.t(((o=t==null?void 0:t.artList)==null?void 0:o.length)>0?`|${t.artList.length}`:""),f:e.t(t.cardName),g:e.t(t.ename),h:e.o(a=>x(t),t.id),i:t.id})}),h:C._imports_0$1}:{},{i:e.unref(c)},e.unref(c)?e.e({j:e.unref(n).showImg,k:e.unref(n).enImgUrl&&!e.unref(n).isHide},e.unref(n).enImgUrl&&!e.unref(n).isHide?e.e({l:e.unref(n).imgUrl,m:e.o(t=>h(e.unref(n).imgUrl)),n:e.unref(n).isHide!=!0},e.unref(n).isHide!=!0?{o:e.unref(n).enImgUrl,p:e.o(t=>h(e.unref(n).enImgUrl))}:{},{q:e.f(e.unref(n).artList,(t,r,f)=>({a:t,b:e.o(o=>h(t),r),c:r}))}):{},{r:e.unref(n).artList?"":1,s:e.t(e.unref(n).cardName),t:e.t(e.unref(n).ename),v:!/^(基本).*?(能量)$/.test(e.unref(n).cardName)},/^(基本).*?(能量)$/.test(e.unref(n).cardName)?{}:{w:e.f(e.unref(n).skillList,(t,r,f)=>e.e({a:!/太晶/g.test(t.name)&&!/规则/g.test(t.name)&&!/ACE /g.test(t.name)},!/太晶/g.test(t.name)&&!/规则/g.test(t.name)&&!/ACE /g.test(t.name)?{b:e.t(t.name),c:/太晶/g.test(t.name)?1:"",d:/特性/g.test(t.name)?1:"",e:/规则/g.test(t.name)?1:"",f:/VSTAR力量/g.test(t.name)?1:"",g:e.t(t.effect==""?"-":t.effect)}:{},{h:t.name}))},{x:e.f(e.unref(n).skillRule,(t,r,f)=>({a:e.t(t.name),b:/太晶/g.test(t.name)?1:"",c:/规则/g.test(t.name)?1:"",d:/ACE /g.test(t.name)?1:"",e:e.t(t.effect==""?"-":t.effect),f:t.name})),y:e.o(t=>e.isRef(c)?c.value=!1:c=!1),z:e.unref(c)?1:""}):{})}},b=e._export_sfc(U,[["__scopeId","data-v-26f27c78"],["__file","/Users/kaws-mac/Desktop/unidemo/subpackagesPtcg/pages/search/index.vue"]]);wx.createPage(b);
