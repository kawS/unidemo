"use strict";const e=require("../../../common/vendor.js"),S=require("../../../common/assets.js"),v=require("../../untils/seriesList.js"),d=require("../../untils/baseEList.js"),U=require("./js/fixData.js");Math||(j+R)();const j=()=>"../../../components/emptyList/index.js",R=()=>"../../../components/copyright/index.js",k={__name:"index",setup(q){let m=[],y=0,x=[],L=e.ref([]),p=e.ref(!1),f=e.ref(null),_=e.ref(null),h=e.ref(null),E=e.ref(null),w=e.ref(null);e.onLoad(i=>{const o=e.index.getStorageSync("tempDeck");let t=JSON.parse(o),r=[];E.value=t;for(let n of t){let s=n.substring(0,n.indexOf(" ")+1);/\{G\}/.test(n)&&(n=s+d.baseEList[0]+" 1"),/\{R\}/.test(n)&&(n=s+d.baseEList[1]+" 2"),/\{W\}/.test(n)&&(n=s+d.baseEList[2]+" 3"),/\{L\}/.test(n)&&(n=s+d.baseEList[3]+" 4"),/\{P\}/.test(n)&&(n=s+d.baseEList[4]+" 5"),/\{F\}/.test(n)&&(n=s+d.baseEList[5]+" 6"),/\{D\}/.test(n)&&(n=s+d.baseEList[6]+" 7"),/\{M\}/.test(n)&&(n=s+d.baseEList[7]+" 8"),r.push(n)}w.value=r.length,$(r)});const $=i=>{e.index.showLoading({title:"加载中",mask:!0}),setTimeout(()=>{e.index.hideLoading()},1500);let o={};h.value=[];for(let t of i){let r=t.replace(/(^\d{1,2} )|( \d{1,3}$)/g,"");d.baseEList.includes(r)||r.lastIndexOf(" ");let n=null,s=null,l=null,a=null,u=null,g=null,c=t.match(/(\d{1,2}) (.+) ([A-Z]{2}\-[A-Z]{2}|[A-Z]{3}\-[A-Z]{2}|[A-Z]{3}|[0-9A-Z]{4}|[A-Z]{5}) (\d{1,3})/);if(c==null){if(!/ Energy/.test(t))continue;c=t.match(/(\d{1,2}) (.+) (\d{1,3})/),s=c[1],l=c[2];let b=d.returnEnergyData(l,s);m.push(b);continue}else s=c[1],l=c[2],v.seriesCodeList[c[3]],a=c[3],g=c[4],u=null;if(/-/.test(a)){let b=a.split("-");b[0]!="PR"?(g=`${b[1]} ${g}`,a=b[0]):(g=`${g}`,a=a)}u=v.seriesCodeList[a],u?(o[u]||(o[u]=[]),n={count:s,ename:l,series:a,sNo:u,cardNo:g},o[u].push(n)):h.value.push({count:s,ename:l,series:a,sNo:u,cardNo:g})}y=Object.keys(o).length,e._.isEmpty(o)?C([],[]):A(o)},A=i=>{var t;let o=i;for(let r of v.seriesList)((t=o[r])==null?void 0:t.length)>0&&v.returnSerDetList(r,function(n){C(n.default,o[r])})},C=(i,o,t)=>{let r=[];for(let s of i){let l=null;s.ename=s.ename.replace(/ \(.+\)/,""),l=s.ename;for(let a of o)if(a.cardNo==s.cardNo&&a.ename.replace("’","'").toLowerCase()==l.toLowerCase()){let u=JSON.parse(JSON.stringify(s));u.count=a.count,u.artIndex=-1,r.push(u)}}if(m=[...m,...r],y-=1,y<=0){let s=m.map(u=>u.ename.toLowerCase()),l=e._.difference(x,s);_.value=l.length>0?l:"";let a={p:[],t:[],e:[]};var n=[[],[],[],[],[],[],[],[],[],[],[]];for(let u of m){if(u.type=="Pokemon"){let g=U.typeIndex[`${u.typeEnergy}`].index;n[g].push(u)}u.type=="Trainers"&&a.t.push(u),u.type=="Energy"&&a.e.unshift(u)}a.p=n.flat(),a.t=e._.sortBy(a.t,u=>u.skillList[u.skillList.length-1].name),m=[...a.p,...a.t,...a.e],L.value=m}else{let s=m.map(a=>a.ename.toLowerCase()),l=e._.difference(x,s);_.value=l.length>0?l.join(", "):""}},I=i=>{i.type=="Energy"&&!i.skillList||(i.skillRule=i.skillList.filter(o=>/太晶/g.test(o.name)||/规则/g.test(o.name)||/ACE /g.test(o.name)),f.value=i,f.value.showImg=f.value.imgUrl,p.value=!0)},D=i=>{f.value.showImg=i},P=()=>{e.index.setClipboardData({data:E.value.join("\r"),success:function(){console.log("success")}})},N=i=>{e.index.navigateTo({url:`/subpackagesPtcg/pages/search/index?searchinp=${encodeURIComponent(i)}`})};return(i,o)=>e.e({a:`overflow: ${e.unref(p)==!0?"hidden":""}`,b:e.t(e.unref(L).length),c:e.unref(_)!=""},e.unref(_)!=""?{d:e.f(e.unref(_),(t,r,n)=>({a:e.t(t),b:r,c:e.o(s=>N(t),r)}))}:{},{e:e.unref(h)!=null&&e.unref(h).length>0},e.unref(h)!=null&&e.unref(h).length>0?{f:e.f(e.unref(h),(t,r,n)=>({a:e.t(t.ename),b:e.t(t.series),c:r}))}:{},{g:e.unref(L).length>0},e.unref(L).length>0?{h:e.f(e.unref(L),(t,r,n)=>({a:t.imgUrl,b:e.t(t.count),c:e.t(t.series),d:t.name,e:e.o(s=>I(t),t.name)})),i:S._imports_0$1}:{},{j:e.t(e.unref(w)),k:e.f(e.unref(E),(t,r,n)=>({a:e.t(t),b:r})),l:e.o(P),m:e.unref(p)},e.unref(p)?e.e({n:e.unref(f).showImg,o:e.unref(f).enImgUrl&&!e.unref(f).isHide},e.unref(f).enImgUrl&&!e.unref(f).isHide?e.e({p:e.unref(f).imgUrl,q:e.o(t=>D(e.unref(f).imgUrl)),r:e.unref(f).isHide!=!0},e.unref(f).isHide!=!0?{s:e.unref(f).enImgUrl,t:e.o(t=>D(e.unref(f).enImgUrl))}:{},{v:e.f(e.unref(f).artList,(t,r,n)=>({a:t,b:e.o(s=>D(t),r),c:r}))}):{},{w:e.unref(f).artList?"":1,x:e.t(e.unref(f).cardName),y:e.t(e.unref(f).ename),z:!/^(基本).*?(能量)$/.test(e.unref(f).cardName)},/^(基本).*?(能量)$/.test(e.unref(f).cardName)?{}:{A:e.f(e.unref(f).skillList,(t,r,n)=>e.e({a:!/太晶/g.test(t.name)&&!/规则/g.test(t.name)&&!/ACE /g.test(t.name)},!/太晶/g.test(t.name)&&!/规则/g.test(t.name)&&!/ACE /g.test(t.name)?{b:e.t(t.name),c:/太晶/g.test(t.name)?1:"",d:/特性/g.test(t.name)?1:"",e:/规则/g.test(t.name)?1:"",f:/VSTAR力量/g.test(t.name)?1:"",g:e.t(t.effect==""?"-":t.effect)}:{},{h:t.name}))},{B:e.f(e.unref(f).skillRule,(t,r,n)=>({a:e.t(t.name),b:/太晶/g.test(t.name)?1:"",c:/规则/g.test(t.name)?1:"",d:/ACE /g.test(t.name)?1:"",e:e.t(t.effect==""?"-":t.effect),f:t.name})),C:e.o(t=>e.isRef(p)?p.value=!1:p=!1),D:e.unref(p)?1:""}):{})}},Z=e._export_sfc(k,[["__scopeId","data-v-bc96b40f"],["__file","/Users/kaws-mac/Desktop/unidemo/subpackagesPtcg/pages/deck/index.vue"]]);wx.createPage(Z);
